import React, { useContext } from "react";
import ArrowIcon from "assets/icons/arrow.icon";
import CheckmarkIcon from "assets/icons/checkmark.icon";
import { Colors } from "constants/constants";
// Components
import { VulnerabilityStep } from "pages/VulnerabilityFormPage/types";
import { VulnerabilityFormContext } from "pages/VulnerabilityFormPage/store";
import { CardArrow, CardContent, CardHeader, CardTitle, StyledVulnerabilityFormCard } from "./styles";

interface IProps {
  id: number
  card: VulnerabilityStep
  title: string
  verified: boolean
  children: React.ReactNode
  disabled: boolean
  extraInfoTitle?: string
  collapsed: boolean
}

export default function VulnerabilityFormCard({ id, card, title, verified, children, disabled, extraInfoTitle, collapsed }: IProps) {
  const { setCurrentStep } = useContext(VulnerabilityFormContext);

  return (
    <StyledVulnerabilityFormCard>
      <CardHeader verified={verified} disabled={disabled} onClick={() => setCurrentStep(id)}>
        <span className="card-number">{verified ? <CheckmarkIcon /> : id + 1}</span>
        <CardTitle open={!collapsed} verified={verified}>{title}</CardTitle>
        {extraInfoTitle && <span>{`(${extraInfoTitle})`}</span>}
        <CardArrow open={!collapsed}>
          <ArrowIcon fill={verified ? Colors.darkBlue : Colors.turquoise} />
        </CardArrow>
      </CardHeader>

      <CardContent collapsed={collapsed}>
        {children}
      </CardContent>
    </StyledVulnerabilityFormCard>
  )
}
